\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{template}


\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}

\RequirePackage{fontspec}

\RequirePackage[default]{cantarell}


\RequirePackage[
  a4paper,
  total={170mm, 247mm},
  left=20mm,
  top=25mm,
  % showframe
]{geometry}

\RequirePackage[skip=3mm]{parskip}
\renewcommand{\baselinestretch}{1.2}
\selectfont


\RequirePackage{amsfonts}
\RequirePackage{amsmath}
\RequirePackage{amssymb}

\RequirePackage{mathastext}

\DeclareMathOperator{\Spec}{Spec}

\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\C}{\mathbb{C}}

\RequirePackage{xcolor}

\definecolor{rosewater}{HTML}{dc8a78}
\definecolor{flamingo}{HTML}{dd7878}
\definecolor{pink}{HTML}{ea76cb}
\definecolor{mauve}{HTML}{8839ef}
\definecolor{red}{HTML}{d20f39}
\definecolor{maroon}{HTML}{e64553}
\definecolor{peach}{HTML}{fe640b}
\definecolor{yellow}{HTML}{df8e1d}
\definecolor{green}{HTML}{40a02b}
\definecolor{teal}{HTML}{179299}
\definecolor{sky}{HTML}{04a5e5}
\definecolor{sapphire}{HTML}{209fb5}
\definecolor{blue}{HTML}{1e66f5}
\definecolor{lavender}{HTML}{7287fd}
\definecolor{subtext2}{HTML}{4c4f69}
\definecolor{subtext1}{HTML}{5c5f77}
\definecolor{subtext0}{HTML}{6c6f85}
\definecolor{overlay2}{HTML}{7c7f93}
\definecolor{overlay1}{HTML}{8c8fa1}
\definecolor{overlay0}{HTML}{9ca0b0}

\definecolor{text}{HTML}{000000}
\color{text}

\makeatletter 
\let\htitle\@title
\let\fauthor\@author
\makeatother

\RequirePackage{fancyhdr}

\fancyfoot[CE, CO]{}
\fancyfoot[LE, RO]{\color{overlay2}\thepage}

\fancyhead[RE, LO]{$ \quad $\color{subtext1}\fauthor $ \quad $}
\fancyhead[LE, RO]{$ \quad $\color{green!40!subtext2}\bfseries\htitle $ \quad $}

\fancypagestyle{plain}{%
  \fancyhf{}%
  \fancyfoot[CE, CO]{}
  \fancyfoot[LE, RO]{\color{overlay2}\thepage}

  \fancyhead[RE, LO]{$ \quad $\color{subtext1}\fauthor $ \quad $}
  \fancyhead[LE, RO]{$ \quad $\color{green!40!subtext2}\bfseries\htitle $ \quad $}
}
\RequirePackage{dashrule}

\renewcommand{\headrule}{\color{overlay0}\hdashrule[.5ex]{\headwidth}{1pt}{1pt}}

\pagestyle{fancy}

\RequirePackage{tikz}
\RequirePackage{tikz-cd}

\RequirePackage{titlesec}

\titleformat{\chapter}[block]{\bfseries\Huge}{\color{green!40!subtext2}\filright\Huge\thechapter.}{1ex}{\color{green!40!subtext2}\Huge\filright}

\titlespacing*{\chapter}{0pt}{0pt}{20pt}

\RequirePackage{amsthm}
\RequirePackage{thmtools}
\RequirePackage{tcolorbox}

% \RequirePackage[framemethod=TikZ]{mdframed}

\tcbuselibrary{theorems}
\tcbuselibrary{breakable}
\tcbuselibrary{skins}

\tcbset{greenTHM/.style={
    fonttitle = \bfseries\large,
    coltitle = green!50!black,
    description color = green!50!black, 
    description font = \bfseries\large,
    colbacktitle = white, %green!40!black!75,
    breakable, 
    enhanced,
    attach boxed title to top left = {
      xshift=0.5cm, 
      yshift=-\tcboxedtitleheight/2
    },
    boxed title style = {
      boxrule=0pt,
      colframe=white
    },
    top=6mm,
    bottom=4mm,
    colback=white,
    frame hidden,
    borderline={1pt}{0pt}{green!40},
    arc=0mm,
    after skip=5mm,
    before skip=5mm
  }
}

\tcbset{orangeTHM/.style={
    fonttitle = \bfseries\large,
    coltitle = orange!60!black,
    description color = orange!60!black, 
    description font = \bfseries\large,
    colbacktitle = white, %green!40!black!75,
    breakable, 
    enhanced,
    attach boxed title to top left = {
      xshift=0.5cm, 
      yshift=-\tcboxedtitleheight/2
    },
    boxed title style = {
      boxrule=0pt,
      colframe=white
    },
    top=6mm,
    bottom=4mm,
    colback=white,
    frame hidden,
    borderline={1pt}{0pt}{orange!40}, 
    arc=0mm,
    before skip=5mm,
    after skip=5mm
  }
}

\def\deff{Definition}
\def\thmm{Theorem}
\def\propp{Proposition}

\NewTcbTheorem[
  auto counter, 
  % number within=chapter
  number within=chapter
]{definition}{\deff}{greenTHM}{def} 

\NewTcbTheorem[
  use counter from=definition
]{theorem}{\thmm}{orangeTHM}{th}

\NewTcbTheorem[
  use counter from=definition
]{proposition}{\propp}{orangeTHM}{prop}

\RequirePackage{xparse}

\tcbset{exBOX/.style={
    fonttitle = \bfseries\large,
    coltitle = blue!50!black,
    description color = blue!50!black, 
    description font = \bfseries\large,
    colbacktitle = white, %green!40!black!75,
    breakable, 
    enhanced,
    attach boxed title to top left = {
      xshift=0.5cm, 
      yshift=-\tcboxedtitleheight/2
    },
    boxed title style = {
      boxrule=0pt,
      colframe=white
    },
    top=6mm,
    bottom=4mm,
    colback=white,
    frame hidden,
    borderline west = {1pt}{0pt}{blue!40},
    borderline north = {1pt}{0pt}{blue!40},
    arc=0mm,
    after skip=5mm,
    before skip=5mm
  }
}

\def\exone{Example}
\def\exmult{Examples}

\NewDocumentEnvironment{example}{o}{
  \IfNoValueTF{#1}{
    \begin{tcolorbox}[title=\exone, exBOX]
  }
  {
    \begin{tcolorbox}[title=\exmult, exBOX]
    \begin{enumerate}
  }
}{
  \IfNoValueF{#1}{
    \end{enumerate}
  }
\end{tcolorbox}
}

\RequirePackage{svg}

\renewenvironment{proof}{{\bfseries\color{green!60!black} Dowód}$ $\newline}{
  \begin{flushright} \includesvg[width=4mm]{../../../../duck.svg} \end{flushright}$ $\newline
}

\RequirePackage{soul}

\sethlcolor{green!15}

\makeatletter
%\font\SOUL@tt="LMMono10-Regular"
\setbox\z@\hbox{\SOUL@tt-}
\SOUL@ttwidth\wd\z@ %
\makeatother

\newcommand{\buff}[1]{
  {\bfseries\color{green}#1}
}

\RequirePackage{enumitem}

\RequirePackage{tocloft}

\RequirePackage{hyperref}

\DeclareOption{dates}{
  \setlength\cftsecnumwidth{6em}
  \let\oldsection\section 
  % \setlength\cftsectionnumwidth{4em}

  \renewcommand{\section}[2]{
    \renewcommand{\thesection}{#1}
    \oldsection{#2}
  }

  \renewcommand{\thesubsection}{\arabic{subsection}.}
}

\DeclareOption{pl}{
  \def\deff{Definicja}
  \def\thmm{Twierdzenie}
  \def\propp{Fakt}
  \def\exone{Przykład}
  \def\exmult{Przykłady}
}

\ProcessOptions\relax

\endinput
